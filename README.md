# USBMap to UTBMap

## Why this script?

I won't cover why USB mapping is important on macOS. For this you can read this article made by [dortania](https://github.com/dortania) [here](https://dortania.github.io/OpenCore-Post-Install/usb/#macos-and-the-15-port-limit).

Given that there's actually no difference when using `USBMap.kext` or `UTBMap.kext` paired with `USBToolBox.kext`, the main advantage I found with the last one is that it's actually SMBIOS independent.

This means that if you plan to use `iMac20,1` and one day switch to `iMac20,2` or other SMBIOSes, you don't have to change the `model` property for each IOKit personality (e.g. [`USBMap.kext/Contents/Info.plist`](/USBMap.kext/Contents/Info.plist)).

###### Please note that I haven't yet tested the script with USBPorts.kext generated by Hackintool. It should theoretically work but I'm quite not sure.

## What does this script do?

As described in [`USBToolBox "Converting existing maps"`](https://github.com/USBToolBox/kext/#converting-existing-maps) paragraph, this tool does nothing else than:

- For each IOKit personality, change the following:
    - `CFBundleIdentifier` to `com.dhinakg.USBToolBox.kext`
    - `IOClass` to `USBToolBox`
    - `IOMatchCategory` to `USBToolBox`
- Add a dictionary named `OSBundleLibraries` which contains `com.dhinakg.USBToolBox.kext`, with value `1.0.0`.

## Usage

From a terminal window, run the following command:

```bash
python3 usb2utb.py <PATH_TO_USBMap.kext>
```

It'll create a new kext called `UTBMap.kext` (you don't say) in the same directory where `USBMap.kext` relies.

## Issues

If you encounter any issue, please file a bugreport [here](https://github.com/dreamwhite/bugtracker/issues/new?assignees=dreamwhite&labels=bug&template=generic.md&title=)


# Credits

- [Corpnewt](https://github.com/corpnewt) for his effort onto [USBMap](https://github.com/corpnewt/USBMap)
- [USBToolBox](https://github.com/USBToolBox/kext/) for `USBToolBox.kext` and the tool which generates `UTBMap.kext`